<!DOCTYPE html>
<html lang="en">
  <head>
    <title>wasmer-c-api: Wasmer Runtime C API</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="content-type" content="text/javascript; charset=utf-8" />
    <meta http-equiv="content-type" content="text/css; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0" />
    <meta name="generator" content="Doxygen 1.8.17"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="wasmer.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="top" role="header">
      <img alt="Wasmer's logo" src="logo.png" />
      <div>
        <h1>
        wasmer-c-api
        </h1>
        <br />
        <small>
          <a href="https://github.com/wasmerio/wasmer"><img src="https://img.shields.io/github/stars/wasmerio/wasmer?style=social" alt="Visit the repository" /></a>
          <a href="https://github.com/wasmerio/wasmer"><img src="https://img.shields.io/github/license/wasmerio/wasmer" alt="License" /></a>
          <a href="https://spectrum.chat/wasmer"><img src="https://withspectrum.github.io/badge/badge.svg" alt="Join the Wasmer Community"></a>
        </small>
      </div>
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Wasmer Runtime C API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/wasmerio/wasmer">Wasmer</a> is a standalone WebAssembly runtime for running WebAssembly <a href="https://webassembly.org/docs/non-web/">outside of the browser</a>, supporting <a href="https://github.com/WebAssembly/WASI">WASI</a> and <a href="https://emscripten.org/">Emscripten</a>.</p>
<p>The Wasmer Runtime C API exposes a C and a C++ API to interact with the Wasmer Runtime, so you can use WebAssembly anywhere.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Usage</h1>
<p>The shared object files and the headers will be automatically available <b>inside the Wasmer installed path</b>.</p>
<blockquote class="doxtable">
<p>Please check the following docs to see how to <a href="https://github.com/wasmerio/wasmer#1-install-wasmer">install Wasmer in your system</a>. </p>
</blockquote>
<p>The C (<a href="https://wasmerio.github.io/wasmer/c-api/wasmer_8h.html"><code>wasmer.h</code></a>) and C++ (<a href="https://wasmerio.github.io/wasmer/c-api/wasmer_8hh.html"><code>wasmer.hh</code></a>) header files can be found in the Wasmer <code>include</code> directory:</p>
<div class="fragment"><div class="line">wasmer config --includedir</div>
</div><!-- fragment --><p>The runtime shared libraries (<code>.so</code>, <code>.dylib</code>, <code>.dll</code>) can be found in the Wasmer <code>lib</code> directory:</p>
<div class="fragment"><div class="line">wasmer config --libdir</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Note: You can also download the libraries or header files directly </p>
</blockquote>
<p>from <a href="https://github.com/wasmerio/wasmer/releases">Wasmer release page</a>.</p>
<p>The full C API documentation can be found here: <a href="https://wasmerio.github.io/wasmer/c-api/">https://wasmerio.github.io/wasmer/c-api/</a></p>
<p>Here is a simple example to use the C API:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="wasmer_8h.html">wasmer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Read the Wasm file bytes.</span></div>
<div class="line">    FILE *file = fopen(<span class="stringliteral">&quot;sum.wasm&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">    fseek(file, 0, SEEK_END);</div>
<div class="line">    <span class="keywordtype">long</span> len = ftell(file);</div>
<div class="line">    uint8_t *bytes = malloc(len);</div>
<div class="line">    fseek(file, 0, SEEK_SET);</div>
<div class="line">    fread(bytes, 1, len, file);</div>
<div class="line">    fclose(file);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Prepare the imports.</span></div>
<div class="line">    <a class="code" href="structwasmer__import__t.html">wasmer_import_t</a> imports[] = {};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Instantiate!</span></div>
<div class="line">    <a class="code" href="structwasmer__instance__t.html">wasmer_instance_t</a> *instance = NULL;</div>
<div class="line">    <a class="code" href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847">wasmer_result_t</a> instantiation_result = <a class="code" href="wasmer_8h.html#adfd8ba25ce4437f739447ebca9a4cc97">wasmer_instantiate</a>(&amp;instance, bytes, len, imports, 0);</div>
<div class="line"> </div>
<div class="line">    assert(instantiation_result == <a class="code" href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847a78f894307d2f7f59c52558cf0a62f532">WASMER_OK</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Let&#39;s call a function.</span></div>
<div class="line">    <span class="comment">// Start by preparing the arguments.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Value of argument #1 is `7i32`.</span></div>
<div class="line">    <a class="code" href="structwasmer__value__t.html">wasmer_value_t</a> argument_one;</div>
<div class="line">    argument_one.<a class="code" href="structwasmer__value__t.html#ade0da74bca0aa810f7f45069ff6e239d">tag</a> = <a class="code" href="wasmer_8h.html#aa63a7da088760a79a8f9c5f0879369ecabd706ef1b12a0f58c838b4425a1de440">WASM_I32</a>;</div>
<div class="line">    argument_one.<a class="code" href="structwasmer__value__t.html#aa0649d12c0f00824a5117d073a601561">value</a>.<a class="code" href="unionwasmer__value.html#a2bdcc05e6d042bc646c1c3f1eee1756c">I32</a> = 7;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Value of argument #2 is `8i32`.</span></div>
<div class="line">    <a class="code" href="structwasmer__value__t.html">wasmer_value_t</a> argument_two;</div>
<div class="line">    argument_two.<a class="code" href="structwasmer__value__t.html#ade0da74bca0aa810f7f45069ff6e239d">tag</a> = <a class="code" href="wasmer_8h.html#aa63a7da088760a79a8f9c5f0879369ecabd706ef1b12a0f58c838b4425a1de440">WASM_I32</a>;</div>
<div class="line">    argument_two.<a class="code" href="structwasmer__value__t.html#aa0649d12c0f00824a5117d073a601561">value</a>.<a class="code" href="unionwasmer__value.html#a2bdcc05e6d042bc646c1c3f1eee1756c">I32</a> = 8;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Prepare the arguments.</span></div>
<div class="line">    <a class="code" href="structwasmer__value__t.html">wasmer_value_t</a> arguments[] = {argument_one, argument_two};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Prepare the return value.</span></div>
<div class="line">    <a class="code" href="structwasmer__value__t.html">wasmer_value_t</a> result_one;</div>
<div class="line">    <a class="code" href="structwasmer__value__t.html">wasmer_value_t</a> results[] = {result_one};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Call the `sum` function with the prepared arguments and the return value.</span></div>
<div class="line">    <a class="code" href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847">wasmer_result_t</a> call_result = <a class="code" href="wasmer_8h.html#a0cc7d0f9de0dea399a9427a91b34574d">wasmer_instance_call</a>(instance, <span class="stringliteral">&quot;sum&quot;</span>, arguments, 2, results, 1);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Let&#39;s display the result.</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Call result:  %d\n&quot;</span>, call_result);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Result: %d\n&quot;</span>, results[0].value.I32);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// `sum(7, 8) == 15`.</span></div>
<div class="line">    assert(results[0].value.I32 == 15);</div>
<div class="line">    assert(call_result == <a class="code" href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847a78f894307d2f7f59c52558cf0a62f532">WASMER_OK</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="wasmer_8h.html#a4b0de11e91ae0256c1bf6ce0440cc161">wasmer_instance_destroy</a>(instance);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Examples</h1>
<p>You can check more examples of how to use the Wasmer C API here:</p>
<p><a href="https://docs.wasmer.io/integrations/examples">https://docs.wasmer.io/integrations/examples</a></p>
<h2><a class="anchor" id="autotoc_md3"></a>
pkg-config</h2>
<p>The Wasmer binary ships with an utility tool that outputs config in the <code>pkg-config</code> format.</p>
<p>You can use it like:</p>
<div class="fragment"><div class="line">wasmer config --pkg-config &gt; $PKG_CONFIG_PATH/wasmer.pc</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
License</h1>
<p>Wasmer is primarily distributed under the terms of the <a href="http://opensource.org/licenses/MIT">MIT license</a> (<a href="https://github.com/wasmerio/wasmer/blob/master/LICENSE">LICENSE</a>). </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="awasmer_8h_html_ab3c4192a4579aa2510cbbfdb0a3d7847a78f894307d2f7f59c52558cf0a62f532"><div class="ttname"><a href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847a78f894307d2f7f59c52558cf0a62f532">WASMER_OK</a></div><div class="ttdeci">@ WASMER_OK</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00131">wasmer.h:131</a></div></div>
<div class="ttc" id="astructwasmer__value__t_html"><div class="ttname"><a href="structwasmer__value__t.html">wasmer_value_t</a></div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00260">wasmer.h:260</a></div></div>
<div class="ttc" id="awasmer_8h_html_adfd8ba25ce4437f739447ebca9a4cc97"><div class="ttname"><a href="wasmer_8h.html#adfd8ba25ce4437f739447ebca9a4cc97">wasmer_instantiate</a></div><div class="ttdeci">enum wasmer_result_t wasmer_instantiate(struct wasmer_instance_t **instance, uint8_t *wasm_bytes, uint32_t wasm_bytes_len, struct wasmer_import_t *imports, int imports_len)</div></div>
<div class="ttc" id="astructwasmer__import__t_html"><div class="ttname"><a href="structwasmer__import__t.html">wasmer_import_t</a></div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00336">wasmer.h:336</a></div></div>
<div class="ttc" id="awasmer_8h_html_ab3c4192a4579aa2510cbbfdb0a3d7847"><div class="ttname"><a href="wasmer_8h.html#ab3c4192a4579aa2510cbbfdb0a3d7847">wasmer_result_t</a></div><div class="ttdeci">wasmer_result_t</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00127">wasmer.h:127</a></div></div>
<div class="ttc" id="astructwasmer__value__t_html_ade0da74bca0aa810f7f45069ff6e239d"><div class="ttname"><a href="structwasmer__value__t.html#ade0da74bca0aa810f7f45069ff6e239d">wasmer_value_t::tag</a></div><div class="ttdeci">wasmer_value_tag tag</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00264">wasmer.h:264</a></div></div>
<div class="ttc" id="awasmer_8h_html_aa63a7da088760a79a8f9c5f0879369ecabd706ef1b12a0f58c838b4425a1de440"><div class="ttname"><a href="wasmer_8h.html#aa63a7da088760a79a8f9c5f0879369ecabd706ef1b12a0f58c838b4425a1de440">WASM_I32</a></div><div class="ttdeci">@ WASM_I32</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00151">wasmer.h:151</a></div></div>
<div class="ttc" id="awasmer_8h_html_a4b0de11e91ae0256c1bf6ce0440cc161"><div class="ttname"><a href="wasmer_8h.html#a4b0de11e91ae0256c1bf6ce0440cc161">wasmer_instance_destroy</a></div><div class="ttdeci">void wasmer_instance_destroy(struct wasmer_instance_t *instance)</div></div>
<div class="ttc" id="astructwasmer__instance__t_html"><div class="ttname"><a href="structwasmer__instance__t.html">wasmer_instance_t</a></div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00180">wasmer.h:180</a></div></div>
<div class="ttc" id="awasmer_8h_html_a0cc7d0f9de0dea399a9427a91b34574d"><div class="ttname"><a href="wasmer_8h.html#a0cc7d0f9de0dea399a9427a91b34574d">wasmer_instance_call</a></div><div class="ttdeci">enum wasmer_result_t wasmer_instance_call(struct wasmer_instance_t *instance, const char *name, const struct wasmer_value_t *params, uint32_t params_len, struct wasmer_value_t *results, uint32_t results_len)</div></div>
<div class="ttc" id="aunionwasmer__value_html_a2bdcc05e6d042bc646c1c3f1eee1756c"><div class="ttname"><a href="unionwasmer__value.html#a2bdcc05e6d042bc646c1c3f1eee1756c">wasmer_value::I32</a></div><div class="ttdeci">int32_t I32</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00232">wasmer.h:232</a></div></div>
<div class="ttc" id="awasmer_8h_html"><div class="ttname"><a href="wasmer_8h.html">wasmer.h</a></div></div>
<div class="ttc" id="astructwasmer__value__t_html_aa0649d12c0f00824a5117d073a601561"><div class="ttname"><a href="structwasmer__value__t.html#aa0649d12c0f00824a5117d073a601561">wasmer_value_t::value</a></div><div class="ttdeci">union wasmer_value value</div><div class="ttdef"><b>Definition:</b> <a href="wasmer_8h_source.html#l00268">wasmer.h:268</a></div></div>

<div id="nav-path" class="navpath" role="footer">
  Generated by
  <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a>
  1.8.17
</div>
</body>
</html>
